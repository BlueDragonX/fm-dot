#!/bin/bash
SOUNDS="${HOME}/.dot/sounds"
SOUND="$1"

help() {
	echo "usage: ding SOUND" >&2
	echo "Play a notification sound. Plays in the background so that it does not block." >&2
	echo "Available sounds are:" >&2

	for SOUND in $(ls "$SOUNDS"); do
		echo "  $SOUND" | sed -e 's/\..*//g'
	done
	exit 1
}

test "$SOUND" == "" && help

FILE=$(find "$SOUNDS" -name "${SOUND}.*" | head -n1)
test -f "$FILE" || help
TYPE=$(echo "$FILE" | sed 's/.*\.//g')

case $TYPE in
'wav')
    aplay "$FILE" &> /dev/null &
    ;;
'mp3')
    mpg123 "$FILE" &> /dev/null &
    ;;
*)
    exit 1
    ;;
esac

exit 0
